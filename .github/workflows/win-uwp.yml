name: CI UWP

on:
  push:
    branches:
    - master

jobs:
  build:
    runs-on: windows-latest
    steps:
    - name: Checkout latest
      uses: actions/checkout@v1
    
    - name: Setup Visual Studio Command Prompt
      uses: warrenbuckley/Setup-MSBuild@v1
      
    - name: Build
      env:
        SOLUTION: 'App.UWP/App.UWP.csproj'
        BUILD_CONFIG: 'Release'
        BUILD_PLATFORM: 'x86|x64|ARM'
        APPX_DIR: 'App.UWP/AppxPackages'
        OUTPUT_DIR: '$(build.artifactStagingDirectory)\App\\'
      run: |
        REM call "C:\Program Files (x86)\Microsoft Visual Studio\2019\Enterprise\Common7\Tools\VsDevCmd.bat"
        msbuild /restore /t:Build /p:AppxBundle=Always /p:UapAppxPackageBuildMode=SideloadOnly /p:AppxBundlePlatforms="%BUILD_PLATFORM%" /p:AppxPackageDir=%APPX_DIR% /p:Configuration=%BUILD_CONFIG% %SOLUTION%
        
     
      

        
